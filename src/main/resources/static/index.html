<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Jira Resolver</title>
</head>
<body style="padding: 30px;">
    <form action="/extraction/start" method="GET">
        <div style="width: 300px;">
            <div style="display: inline-block; width: 40%">
                URL:
            </div>
            <div style="display: inline-block; width: 50%">
                <input type="text" name="url" value="https://issues.apache.org/jira" />
            </div>
        </div>

        <div style="width: 300px;">
            <div style="display: inline-block; width: 40%">
                JQL:
            </div>
            <div style="display: inline-block; width: 50%">
                <input type="text" name="jql" value="project = AMQ" />
            </div>
        </div>

        <div style="width: 300px;">
            <div style="display: inline-block; width: 40%">
                MaxResults:
            </div>
            <div style="display: inline-block; width: 50%">
                <input type="text" name="maxResults" value="5" />
            </div>
        </div>

        <div style="width: 300px;">
            <div style="display: inline-block; width: 40%">
                StartAt:
            </div>
            <div style="display: inline-block; width: 50%">
                <input type="text" name="startAt" value="0" />
            </div>
        </div>

        <div style="width: 300px;">
            <div style="display: inline-block; width: 40%">
                Delay:
            </div>
            <div style="display: inline-block; width: 50%">
                <input type="text" name="delay" value="3000" />
            </div>
        </div>
        <div>
            <input type="submit" value="Extract" />
        </div>
    </form>
    <a href="/extraction/stop">Stop Extraction</a>
    <a href="/core/train">Neural Network Train</a>
    <div id="status-of-extraction" style="border: 2px black solid; width: 300px; margin: 30px; padding: 5px;"></div>
    <div id="status-of-train" style="border: 2px black solid; width: 300px; margin: 30px; padding: 5px;"></div>
    <script>
        function check() {
            var xhr = new XMLHttpRequest();
            xhr.open('GET', '/extraction/status', false);
            xhr.send();

            if (xhr.status != 200) {
                document.getElementById('status-of-extraction').textContent = 'no connection';
            } else {
                document.getElementById('status-of-extraction').textContent = 'status: ' + parseFloat(xhr.responseText) * 100 + ' %';
            }
        }

        function checkTrain() {
            var xhr = new XMLHttpRequest();
            xhr.open('GET', '/core/status', false);
            xhr.send();

            if (xhr.status != 200) {
                document.getElementById('status-of-train').textContent = 'no connection';
            } else {
                document.getElementById('status-of-train').textContent = 'train status: ' + xhr.responseText;
            }
        }

        window.setInterval(function(){
            check();
        }, 1000);
    </script>
</body>
</html>